# Интернет-магазин цифровых товаров

## Обзор проекта

Приложение представляет собой интернет-магазин, предназначенный для покупки цифровых товаров из сферы игр, т.е. игровая валюта, виртуальные предметы и т.д

## Архитектура системы

```mermaid
graph LR
    %% Controllers
    AC["Auth Controller<br>(Process Controller)<br>Управление аутентификацией<br>и авторизацией"]
    DPC["Digital Product Controller<br>(Process Controller)<br>Управление каталогом<br>цифровых товаров"]
    OC["Order Controller<br>(Process Controller)<br>Обработка заказов и<br>доставка цифровых товаров"]
    DDS["Digital Delivery Service<br>(Service)<br>Сервис доставки<br>цифровых товаров"]

    %% Services
    AS["Auth Service<br>(Service)<br>Бизнес-логика<br>аутентификации"]
    DPS["Digital Product Service<br>(Service)<br>Бизнес-логика работы с<br>цифровыми товарами"]
    LS["License Service<br>(Service)<br>Управление лицензиями<br>цифровых товаров"]
    OS["Order Service<br>(Service)<br>Бизнес-логика обработки<br>заказов"]

    %% Repositories
    UR["User Repository<br>(Repository)<br>Работа с данными<br>пользователей"]
    DPR["Digital Product Repository<br>(Repository)<br>Работа с данными<br>цифровых товаров"]
    OR["Order Repository<br>(Repository)<br>Работа с данными заказов"]
    
    %% External Systems
    CS["Облачное хранилище<br>Хранение цифровых<br>товаров"]
    PS["Платежный шлюз<br>Обработка платежей"]
    ES["Email-сервис<br>Отправка уведомлений"]
    DB["Основная база данных<br>Хранение данных<br>пользователей, товаров и заказов"]

    %% Connections
    AC -->|Использует| AS
    DPC -->|Использует| DPS
    OC -->|Использует| LS
    OC -->|Использует| OS
    
    AS -->|Получает данные пользователей| UR
    DPS -->|Управляет товарами| DPR
    LS -->|Генерирует лицензии| DPR
    OS -->|Управляет заказами| OR
    OS -->|Обрабатывает платежи| PS
    
    UR -->|Читает/записывает| DB
    DPR -->|Читает/записывает| DB
    OR -->|Читает/записывает| DB
    
    DDS -->|Получает файлы| OS
    OS -->|Отправляет уведомления| ES
    OS -->|Хранение цифровых товаров| CS
```

Архитектура построена по многоуровневому принципу и состоит из следующих ключевых компонентов:

- Уровень контроллеров (Controllers):
    - Auth Controller отвечает за процессы аутентификации и авторизации
    - Digital Product Controller управляет каталогом цифровых товаров
    - Order Controller обрабатывает заказы и доставку товаров
    - Digital Delivery Service занимается непосредственно доставкой цифровых товаров

- Уровень сервисов (Services):
    - Auth Service реализует бизнес-логику аутентификации
    - Digital Product Service содержит бизнес-логику работы с цифровыми товарами
    - License Service управляет лицензиями цифровых товаров
    - Order Service обрабатывает бизнес-логику заказов

- Уровень репозиториев (Repositories):
    - User Repository работает с данными пользователей
    - Digital Product Repository управляет данными цифровых товаров
    - Order Repository хранит и управляет данными заказов

- Внешние системы:
    - Облачное хранилище для хранения цифровых товаров
    - Платежный шлюз для обработки платежей
    - Email-сервис для отправки уведомлений
    - Основная база данных для хранения всех данных (пользователей, товаров и заказов)

- Архитектура следует принципам:
    - Разделения ответственности (каждый компонент отвечает за свою конкретную функцию)
    - Слабой связанности (компоненты взаимодействуют через четко определенные интерфейсы)
    - Иерархической организации (контроллеры используют сервисы, сервисы используют репозитории)

Такая архитектура обеспечивает:
- Масштабируемость системы
- Простоту поддержки и модификации отдельных компонентов
- Чёткое разделение бизнес-логики и доступа к данным
- Возможность независимого тестирования компонентов

## User Journey

```mermaid
journey
  title Путь покупателя игрового ключа/валюты
  section Выбор товара
    Вход на сайт: 5: Пользователь
    Выбор игры/валюты: 4: Пользователь
    Проверка региона активации: 3: Пользователь
    Сравнение цен: 4: Пользователь
  section Покупка
    Добавление в корзину: 5: Пользователь
    Проверка наличия: 4: Система
    Авторизация: 4: Пользователь
    Выбор способа оплаты: 4: Пользователь
    Оплата: 3: Пользователь
  section Получение
    Проверка оплаты: 5: Система
    Генерация ключа: 5: Система
    Получение инструкций: 4: Пользователь
    Активация/Получение валюты: 4: Пользователь
```

Эта диаграмма описывает пользовательский путь при покупке игрового ключа или внутриигровой валюты на сервисе. Процесс разделен на три основных этапа:

1. Этап выбора товара:
  - Пользователь заходит на сайт
  - Выбирает интересующую игру или внутриигровую валюту
  - Проверяет региональные ограничения по активации
  - Сравнивает цены на товар

2. Этап покупки:
  - Добавляет выбранный товар в корзину
  - Система автоматически проверяет наличие товара
  - Пользователь проходит авторизацию
  - Выбирает удобный способ оплаты
  - Совершает оплату

3. Этап получения товара:
  - Система проверяет статус оплаты
  - После успешной оплаты генерирует ключ активации
  - Пользователь получает инструкции по использованию
  - Выполняет активацию ключа или получает внутриигровую валюту

На диаграмме также отмечен уровень удовлетворенности (от 1 до 5) для каждого шага и указано, кто выполняет действие - пользователь или система. Наиболее высокие оценки (5) получили начальные этапы взаимодействия (вход на сайт, добавление в корзину) и системные операции (проверка оплаты, генерация ключа), что говорит об их оптимальной реализации.

## Mindmap 

```mermaid
mindmap
  root((Магазин игровый ключей и валюты))
    Каталог
      Ключи игр
        Steam
        Epic Games
        Rockstar Games
        Battle.net
      Игровая валюта
        Fortnite VBucks
        CS2 скины
        Dota 2 Предметы
      Поиск
        По игре
        По платформе
        По цене
        По популярности
    Личный кабинет
      История покупок
      Избранные игры
      Настройки профиля
      Привязка аккаунтов
    Корзина
      Просмотр товаров
      Быстрая покупка
      Промокоды
    Оплата
      Банковские карты
      Paypal
      WebMoney
      Криптовалюты
    Доставка
      Автоматическая выдача ключей
      Передача валюты
      Гарант-сервис
    Поддержка
      24/7 онлайн-чат
      Discord сервер
      Система тикетов
      FAQ по передаче
```

Mind map показывает 6 основных разделов магазина игровых ключей и валюты:

- Каталог
- Личный кабинет
- Корзина
- Оплата
- Доставка
- Поддержка

Эти разделы формируют основную структуру магазина, обеспечивая весь необходимый функционал для работы платформы.

## Quadrant-граф

```mermaid
quadrantChart
    title Feature Development Priorities
    x-axis Low Priority --> High Priority
    y-axis Low Complexity --> High Complexity
    quadrant-1 Requires Thorough Analysis
    quadrant-2 Consider Dropping
    quadrant-3 Plan for Near Future
    quadrant-4 Implement Immediately
    Report Generation: [0.8, 0.6]
    Order Analytics: [0.9, 0.9]
    Payment System Integration: [0.85, 0.4]
    Support Chat: [0.4, 0.34]
    Complex Feedback System: [0.25, 0.7]
    Email Feed Notifications: [0.2, 0.6]
    Recommended Products: [0.3, 0.25]
    Save to Favorites: [0.6, 0.2]
    Product Sorting: [0.8, 0.25]
```

Эта диаграмма приоритетов разработки функционала (Quadrant Chart) разделяет задачи по двум осям:
- По оси X отражен приоритет (от низкого к высокому)
- По оси Y отражена сложность реализации (от низкой к высокой)

Квадранты диаграммы:
1. "Implement Immediately" (высокий приоритет, низкая сложность)
2. "Requires Thorough Analysis" (высокий приоритет, высокая сложность)
3. "Consider Dropping" (низкий приоритет, высокая сложность)
4. "Plan for Near Future" (низкий приоритет, низкая сложность)

Такое распределение помогает команде разработки определить:
- Что нужно реализовать в первую очередь
- Какие задачи требуют тщательного планирования
- Какой функционал можно отложить или пересмотреть
- Где нужен дополнительный анализ перед реализацией

## Workflow разработки (git-граф)

```mermaid
gitGraph
    commit id: "Initial"
    branch develop
    checkout develop
    commit id: "Каталог игр"
    branch feature/game-keys
    checkout feature/game-keys
    commit id: "Система выдачи ключей"
    checkout develop
    merge feature/game-keys
    branch feature/game-currency
    checkout feature/game-currency
    commit id: "Система передачи валюты"
    commit id: "Гарант-сервис"
    checkout develop
    merge feature/game-currency
    branch feature/security
    checkout feature/security
    commit id: "Защита от мошенничества"
    checkout develop
    merge feature/security
    checkout main
    merge develop tag: "v1.0.0"
```

Этот граф в стиле Git показывает процесс разработки программного проекта. Он иллюстрирует создание и развитие веток, добавление новых функций (например, каталог игр, система ключей, передача валюты, защита от мошенничества), а также их слияние в основные ветки разработки. Финальный этап включает объединение изменений в главную ветку и выпуск версии с тегом v1.0.0


